<!DOCTYPE html>
<html>
  <head>
    <title>Global Plastic Pollution</title> <a href="https://myho1998.github.io/The-world-s-plastic-polution/index.html#" title="Global Plastic Pollution">Global Plastic Pollution</a>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    
    <script type="text/javascript">
      google.charts.load('current', {
        'packages': ['corechart']
      });
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Year', 'Plastic Production (Million tonnes)'],
          ['1950', 2],
          ['1960', 8],
          ['1970', 35],
          ['1980', 70],
          ['1990', 120],
          ['2000', 213],
          ['2010', 313],
          ['2019', 459.75],
        ]);
        var options = {
          curveType: 'function',
          width: 500,  
          height: 300, 
          legend: {
            position: 'bottom'
          }
        };
        var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));
        chart.draw(data, options);
      }
    </script>

    <script src="https://api.mapbox.com/mapbox-gl-js/v2.5.0/mapbox-gl.js"></script>
    <link href="./css/style.css" rel="stylesheet" />
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.8.1/mapbox-gl.css" rel="stylesheet">
  
  </head>

  <body>
    <!-- "navigation bar" -->
    <header>
      <h1>Global Plastic Solution</h1>  
      <nav>
          <ul class="nav__links">
              <li><a href="index.html">Dashboard</a></li>
              <li><a href="datasources.html">Data Sources</a></li>
              <li><a href="about.html">About</a></li>
          </ul>
      </nav>
  </header>  

    <script src="./assets/data_for_choropleth.js"></script>

    <div class="container">
      <div class="widgets">
        <div class="widget-background"></div>
        <div class="widget" style="height: 50%">
          <h2>Global Plastics Production</h2>
          <div id="curve_chart"></div>
        </div>
        <!-- "widget" div -->
        <div class="widget" style="height: 50%">
          <h2>Plastic Exports by</h2>

          <!-- Dropdown menu area -->
          <div class="dropdown">
            <button id="pie_selector" class="dropbtn">Country</button>
            <div class="dropdown-content">
              <a href="#" onclick="selectView('Country')">Country</a>
              <a href="#" onclick="selectView('Continent')">Continent</a>
              <a href="#" onclick="selectView('Income Level')">Income Level</a>
            </div>
          </div>
          <!-- -->

          <link rel='css' href='css/style.css' />
          <link rel='css' href='css/bootstrap.min.css' />
          <link rel='css' href='css/font-awesome.min.css' />
          <!-- Load c3.css -->
          <link href="css/c3.css" rel="stylesheet" type="text/css">
          <!-- Load d3.js and c3.js -->
          <script src="js/d3.v3.min.js" charset="utf-8"></script>
          <script src="js/c3.min.js"></script>
          <!-- Load papaparse.js -->
          <script src="js/papaparse.min.js"></script>
          <div class="container">
            <div id="chart"></div>
          </div>
          <script src="js/export_pie_chart.js"></script>
          <p>The following pie chart uses data from: <a href="https://github.com/myho1998/The-world-s-plastic-polution/blob/main/assets/global_waste_exports_2010.csv" target="_blank">Global Waste Exports 2010 Dataset.</a>. </p> 
          <p>The following pie chart displays global plastic exports between different countries, continents, and income level in 2010. The following chart shows each group's global share for exports relative to their counterparts, while also displaying the exact amount when hovered over. </p>
        </div> <!-- "widget" div -->
        <div class='map-overlay' id='legend'></div>
      </div> <!-- "widgets" div -->
      <div id="map" class="map"></div>
    </div> <!-- "container" div -->
  

    <script>
      mapboxgl.accessToken = 'pk.eyJ1IjoibGlsbGx5MDIiLCJhIjoiY2xkZ2o4dTA1MHh1MTNxcjhjbmxucGZjZSJ9.ODEhxh5a5B_as4sMO9Z73w';
      const map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/light-v11',
        center: [12, 50],
        zoom: 2.2
      });
      map.on('load', () => {
        // Add source for country polygons using the Mapbox Countries tileset
        map.addSource('countries', {
          type: 'vector',
          url: 'mapbox://mapbox.country-boundaries-v1'
        });
        const matchExpression = ['match', ['get', 'iso_3166_1_alpha_3']];
        // Calculate color values for each country based on 'pWaste2016' value
        for (const row of data) {
          // Convert the range of data values to a suitable color
          const green = row['pWastePercap2016'] * 10;
          const color = `rgb(0, 0, ${green})`;
          matchExpression.push(row['cca3'], color);
        }
      
        matchExpression.push('rgba(0, 0, 0, 0)');
        map.addLayer({
          'id': 'countries-join',
          'type': 'fill',
          'source': 'countries',
          'source-layer': 'country_boundaries',
          'paint': {
            'fill-color': matchExpression,
            'fill-opacity': 0.2
          }
        }, 'admin-1-boundary-bg');
      });
      map.addControl(new mapboxgl.NavigationControl());
    </script>

  </body>
</html>